<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Brands Page</title>
  <link rel="stylesheet" href="../style.css" />

  <!-- Script -->
  <script>
    // Load the header component
    fetch('/components/header.html')
      .then(response => response.text())
      .then(data => {
          document.getElementById('header-container').innerHTML = data;
      })
      .catch(error => console.error('Error loading header:', error));

    // Load the footer component
    fetch('/components/footer.html')
      .then(response => response.text())
      .then(data => {
          document.getElementById('footer-container').innerHTML = data;
      })
      .catch(error => console.error('Error loading footer:', error));
  </script>
</head>
<body>
  <!-- Header -->
  <header id="header-container"></header>

  <main class="brands-container">
    <div class="breadcum">
      <a href="/index.html">HOME</a> / <a href="/brands.html">BRANDS</a>
    </div>
    <section class="product-section">
      <h1 id="category-title">Loading...</h1>
      <div id="product-list" class="product-list"></div>
    </section>
  </main>

  <!-- Link your constants and JS files -->
  <script src="constant.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Fetch selected category from localStorage
      const selectedCategory = localStorage.getItem('selectedCategory');

      // Reference to the DOM elements
      const categoryTitleElement = document.getElementById('category-title');
      const productListElement = document.getElementById('product-list');

      if (selectedCategory && productData[selectedCategory]) {
        // Set the category title dynamically
        categoryTitleElement.textContent = selectedCategory.replace('-', ' ').toUpperCase();

        // Loop through the products of the selected category and create product cards
        productData[selectedCategory].forEach(product => {
          const productItem = document.createElement('div');
          productItem.classList.add('product-item');
          
          productItem.innerHTML = `
            <h2>${product.name}</h2>
            <p>Price: $${product.price}</p>
            <p>${product.description}</p>
          `;
          
          productListElement.appendChild(productItem);
        });

      } else {
        // If no category or product data is found, display an error message
        categoryTitleElement.textContent = 'No Category Selected';
        productListElement.innerHTML = '<p>There are no products available for this category.</p>';
      }
    });
  </script>

  <!-- Footer -->
  <footer id="footer-container"></footer>
</body>
</html>